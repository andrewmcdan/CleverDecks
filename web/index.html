<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=0.4">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
    <meta http-equiv="Pragma" content="no-cache" />
    <meta http-equiv="Expires" content="0" />
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="img/favicon-180x180.png" type="image/png">
    <!-- MathJax -- This library is used to render mathematical expressions. -->
    <script>MathJax = { chtml: { scale: 1.5 }, tex: { formatError: (jax, error) => { jax.formatError(error); } } };</script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="common.js"></script>
    <!-- Socket.io library -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="web.js"></script>
    <title>CleverDecks - Home</title>
</head>

<body class="min-w-500px flex bg-gray-600 h-auto justify-evenly">
    <div class=" bg-transparent">
        <!-- Left spacer -->
    </div>
    <div class="">
        <div class="container w-[1600px] shadow-xl bg-white shadow-black">
            <nav class="navbar bg-gray-800 text-white flex">
                <div class="items-start container px-0 py-0 flex mx-0 my-0">
                    <div id="logo" class="size-24 border-4 border-black" onclick="window.location.href = 'index.html'">
                        <img src="img/CD_logo_1024x1024.png" alt="CleverDecks">
                    </div>
                    <div class="navBtn flex items-center justify-center size-24 bg-white text-black "
                        onclick="window.location.href = 'index.html'">
                        <p class="text-center text-2xl">Home</p>
                    </div>
                    <div class="navBtn flex items-center justify-center size-24 hover:bg-white hover:text-black"
                        onclick="window.location.href = 'study.html'">
                        <p class="text-center text-2xl">Study</p>
                    </div>
                    <div class="navBtn flex items-center justify-center size-24 hover:bg-white hover:text-black"
                        onclick="window.location.href = 'quiz.html'">
                        <p class="text-center text-2xl">Quiz</p>
                    </div>
                    <div class="navBtn flex items-center justify-center size-24 hover:bg-white hover:text-black"
                        onclick="window.location.href = 'create.html'">
                        <p class="text-center text-2xl">Create</p>
                    </div>
                </div>
                <div class="px-4 realtive">
                    <div id="searchResultsContainer"
                        class="absolute gone top-10 bg-white shadow-md shadow-white rounded-sm border border-gray-200 p-4">
                        <ul id="searchResultsList" class="text-black w-full">
                            <!-- Search results will be added here -->
                        </ul>
                    </div>
                    <div id="cardSearch" class="size-1/2 flex items-center text-black">
                        <input type="text" id="search" placeholder="Search..." onkeyup="" autocomplete="off">
                        <button class="border-2 border-white text-white" id="searchButton" onclick="">Search</button>

                    </div>
                    <div id="cardDropDown" class="size-1/2  text-black">
                        <select id="collectionSelect">
                            <option>Study a Collection(Quick Load)</option>
                        </select>
                    </div>
                </div>
            </nav>
            <div id="content" class="p-4">
                <!-- Total Flashcard Count Display -->
                <div id="cardCount" class="text-lg font-semibold mb-4">
                    Flashcards Loaded: N
                </div>

                <!-- Settings Section -->
                <div class="settings mb-6">
                    <h2 class="text-xl font-semibold mb-2">Settings</h2>
                    <div>
                        <label for="api-key" class="block mb-2 text-sm font-medium text-gray-900">OpenAI API
                            Key:</label>
                        <input type="text" id="api-key" name="api-key"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5"
                            placeholder="Enter your API Key">
                    </div>
                    <div class="mt-4">
                        <label for="logging-level" class="block mb-2 text-sm font-medium text-gray-900">Logging
                            Level:</label>
                        <select id="logging-level" name="logging-level"
                            class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5">
                            <option value="info">Info</option>
                            <option value="warn">Warn</option>
                            <option value="error">Error</option>
                            <option value="debug">Debug</option>
                        </select>
                    </div>
                </div>

                <!-- Additional Information or Widgets -->
                <div class="additional-info mb-6">
                    <h2 class="text-xl font-semibold mb-2">Your Progress</h2>
                    <!-- Dynamically populated based on user's study and quiz history -->
                    <p>Placeholder for graphs, charts, or any other visual representation of the user's progress.</p>
                </div>
                <!-- Flashcard Management Section -->
                <div class="flashcard-management mb-6">
                    <h2 class="text-xl font-semibold mb-2">Flashcard Management</h2>
                    <div id="flashcardList" class="mb-4">
                        Dynamically populated list of flashcards with edit and delete options
                    </div>
                </div>
            </div>

            <footer class="bg-gray-800 text-white items-center justify-center w-full p-6">
                <div class="flex items-center mb-4 justify-center">
                    <a href="https://github.com/andrewmcdan/CleverDecks" target="_blank" class="px-2 py-4">GitHub</a> |
                    <a href="https://github.com/andrewmcdan/CleverDecks?tab=AGPL-3.0-1-ov-file" target="_blank"
                        class="px-2 py-4">License</a>
                    |
                    <a href="about-us.html" target="_blank" class="px-2 py-4">About Us</a> |
                    <a href="flashcards.html" target="_blank" class="px-2 py-4">My FlashCards</a>
                </div>
                <div class="footer-logo flex items-center justify-center">
                    <a href="/">
                        <img src="img/CD_logo_1024x1024.png" alt="CleverDecks Logo" style="height: 100px;">
                    </a>
                </div>
                <div class="flex items-center mt-4 justify-around">
                    <p>Copyright &copy; 2024 by Edwin Maldonado, Andrew McDaniel, Bryce Martin-White, Elizabeth King,
                        and
                        Uday
                        Kadarla. All rights reserved.</p>
                </div>
            </footer>
            <div class="fixed bottom-0 left-0 z-10 bg-black" id="status">
                <div class="flex items-center justify-center bg-red-500 text-white p-0.5" id="statusMessageContainer">
                    <p class="text-center text-l font-mono m-0 p-0" id="statusMessage">Status: Connecting</p>
                </div>
            </div>
        </div>
    </div>
    <div class=" bg-transparent">
        <!-- Left spacer -->
    </div>
</body>
<style>
    /*
        Styles unique to this page go here
        */
</style>
<script>
    (async () => {
        await CleverDecks.waitReady();

        // JavaScript unique to this page goes here
        // There is a global variable called CleverDecks that has methods for accessing the backend. See web.js for more information.


        ///////////////// Example / Testing //////////////////////

        CleverDecks.getCards({ search: "Paris", method: "AND", collection: "Countries" }).then((cards) => {

            console.log({ cards });

        }).catch((error) => {
            console.error({ error });
        });



        let cardCountDivHTML = '';
        let cardCountDiv = document.getElementById('cardCount');
        let totalCardCountDiv = document.getElementById('totalCardCount');

        let collectionNames = await CleverDecks.getCollectionNames();
        let collectionCount = collectionNames.length;
        cardCountDivHTML += `<p>There are ${collectionCount} collections available to study.</p>`;
        CleverDecks.getCardCount({ all: true }).then((count) => {
            cardCount = count;
            totalCardCountDiv.innerHTML = `<p>There are ${cardCount} total cards available to study.</p>`;
        }).catch((error) => {
            console.error({ error });
        })
        for (let i = 0; i < collectionCount; i++) {
            CleverDecks.getCardCount({ collection: collectionNames[i] }).then((count) => {
                cardCountDivHTML += `<p>Collection ${i + 1} (${collectionNames[i]}) has ${count} cards.</p>`;
                cardCountDiv.innerHTML = cardCountDivHTML;
            }).catch((error) => {
                console.error({ error });
            });
        }
    })();
</script>

</html>